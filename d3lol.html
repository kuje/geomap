<script src="http://d3js.org/d3.v3.min.js"></script>



<h1>d3lol</h1>


<geomap>
</geomap>


<script>

globaalidata = [
  {
    latlng: [ 51.508, -0.11 ]
  },
  {
    latlng: [51.507, -0.10]
  },
  {
    latlng: [51.509, -0.12]
  }
];


smurrffiliikkuu = function() {
  globaalidata[0].latlng[0] += 0.001;

  paivitaSmurffit(globaalidata);
}

paivitaSmurffit = function(data) {

  d3map = d3.select("geomap")
  console.log("d3map", d3map)

  var smurffit = d3map.selectAll("smurffi")
  .data(data)

  smurffit
  .enter()
  .append("smurffi")
  // .each(angular.element(document.querySelector("map")).scope().compileri);

  smurffit
  .text(function(d, i){return i;})
  .attr("lat", function(d) {
    return d.latlng[0];
  })
  .attr("lon", function(d) {
     return d.latlng[1];
   })
  // .each(angular.element(document.querySelector("map")).scope().updateri);

}


window.addEventListener("DOMContentLoaded", function() {

  paivitaSmurffit(globaalidata);

});

</script>


